#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Tue Jun 29 10:31:56 2021

@author: aolza
"""
import pandas as pd

def plot(N,dic,yr,top):#lin17,lin17Ac,lasso17Ac,log17,log17Ac,nb17Ac,yr,top):
        
    d=pd.DataFrame(index=N)
    for key, value in dic.items():
        d[key]=value

    ax=d.plot.barh(title='Costes 20{0} - Recall TOP{1}'.format(yr,top),figsize=(5,10),width=0.9)
    ax.set_xlim([0, max(d[key])+15])
    for p in ax.patches:
        ax.annotate(str(round(p.get_width(),2)), ( p.get_width() * 1.005,p.get_y() ))
    ax.legend(bbox_to_anchor=(1.05, 1))

"""TOP 1 """

N=[22405,44810,50000,67215,89620,1e5,112025]

lin17Ac=[25.13278,36.02321,37.96474,43.43673,49.20777,51.47512,53.77817]
lin18Ac=[24.08085,35.05711,36.90434,42.18722,47.89399,50.16955,52.53436]
lin19Ac=[24.50989,35.48745,37.28378,42.71711,48.43431,50.61208,52.83864]

# rfund1017Ac= [31.55099308190136, 42.18701182771703, 43.90091497433608, 49.01138138808302, 53.97902253961169, 56.05891542066503, 58.02276277616603]
# rfund1018Ac= [23.467975898237, 34.25574648515956, 36.25976344565945, 41.58000446328944, 46.92702521758536, 49.18098638696719, 51.3858513724615]
# rfund1019Ac= [23.77147958045079, 34.282526221825485, 36.26869002454809, 41.71390314661906, 47.19482258424459, 49.426467306404824, 51.903592948002675]

rfund3017Ac= [31.885739790225397, 43.11091274269136, 44.945324704307076, 49.97098861861192, 55.072528453470206, 56.73733541620174, 58.857397902253965]
rfund3018Ac= [23.713456817674626, 34.389645168489174, 36.37580897121178, 41.651417094398575, 47.11448337424682, 49.36398125418433, 51.63133229189913]
rfund3019Ac= [23.96340102655657, 34.50122740459719, 36.36688239232314, 41.94599419772372, 47.68132113367552, 49.92189243472439, 52.15800044632894]


hgbPoisson17Ac= [21.9192144610578, 31.850033474670834, 33.88083017183664, 39.25463066279848, 44.88730194153091, 47.15911626869003, 49.591609015844675]
hgbPoisson18Ac= [19.937513947779514, 29.89511269805847, 31.609015844677526, 37.067618835081454, 42.96808748047311, 45.22204864985494, 47.62776166034367]
hgbPoisson19Ac= [20.66056683775943, 30.734211113590717, 32.51060031243026, 37.54519080562375, 43.35639366212899, 45.55233206873466, 47.90894889533586]

hgb17Ac= [25.623744699843783, 35.911626869002454, 37.58089712117831, 42.67797366659228, 47.5251060031243, 49.55590270029011, 51.67596518634233]
hgb18Ac= [23.34746708324035, 33.81834411961616, 35.77326489622852, 40.7632224949788, 46.025440749832626, 48.00267797366659, 50.21200624860522]
hgb19Ac= [23.686677081008703, 34.11738451238563, 35.84914081678197, 40.812318678866326, 46.132559696496315, 48.19906270921669, 50.27895559027003]

d={'lin':lin17Ac,'randomForest':rfund3017Ac,'hgb':hgb17Ac,'hgbPoisson':hgbPoisson17Ac}
plot(N,d,17,1)

d={'lin':lin18Ac,'randomForest':rfund3018Ac,'hgb':hgb18Ac,'hgbPoisson':hgbPoisson18Ac}
plot(N,d,18,1)

d={'lin':lin19Ac,'randomForest':rfund3019Ac,'hgb':hgb19Ac,'hgbPoisson':hgbPoisson19Ac}
plot(N,d,19,1)

"""PPV"""
rfund1017Ac= [31.55099308190136, 21.093505913858515, 19.672, 16.337127129361004, 13.494755634902923, 12.56, 11.604552555233207]
rfund1018Ac= [23.467975898237, 17.12787324257978, 16.248, 13.860001487763148, 11.73175630439634, 11.019, 10.2771702744923]
rfund1019Ac= [23.77147958045079, 17.141263110912742, 16.252, 13.904634382206353, 11.798705646061148, 11.074, 10.380718589600535]

hgbPoisson17Ac= [21.9192144610578, 15.925016737335417, 15.182, 13.084876887599494, 11.221825485382727, 10.566, 9.918321803168935]
hgbPoisson18Ac= [19.937513947779514, 14.947556349029234, 14.164, 12.355872945027151, 10.742021870118277, 10.132, 9.525552332068735]
hgbPoisson19Ac= [20.66056683775943, 15.367105556795359, 14.568, 12.515063601874582, 10.839098415532247, 10.206, 9.581789779067172]

hgb17Ac= [25.623744699843783, 17.955813434501227, 16.84, 14.225991222197425, 11.881276500781075, 11.103, 10.335193037268468]
hgb18Ac= [23.34746708324035, 16.90917205980808, 16.03, 13.5877408316596, 11.506360187458156, 10.755, 10.042401249721044]
hgb19Ac= [23.686677081008703, 17.058692256192813, 16.064, 13.604106226288774, 11.533139924124079, 10.799, 10.055791118054005]

rfund3017Ac= [31.885739790225397, 21.55545637134568, 20.14, 16.65699620620397, 13.768132113367551, 12.712, 11.771479580450793]
rfund3018Ac= [23.713456817674626, 17.194822584244587, 16.3, 13.883805698132857, 11.778620843561704, 11.06, 10.326266458379825]
rfund3019Ac= [23.96340102655657, 17.250613702298594, 16.296, 13.981998065907908, 11.92033028341888, 11.185, 10.431600089265789]

d={'lin':lin17Ac,'randomForest':rfund3017Ac,'hgb':hgb17Ac,'hgbPoisson':hgbPoisson17Ac}
plot(N,d,17,1)

d={'lin':lin18Ac,'randomForest':rfund3018Ac,'hgb':hgb18Ac,'hgbPoisson':hgbPoisson18Ac}
plot(N,d,18,1)

d={'lin':lin19Ac,'randomForest':rfund3019Ac,'hgb':hgb19Ac,'hgbPoisson':hgbPoisson19Ac}
plot(N,d,19,1)