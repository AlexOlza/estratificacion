#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Thu Jun 17 10:49:24 2021

@author: aolza
"""
import pandas as pd

def plot(N,dic,yr,top):#lin17,lin17Ac,lasso17Ac,log17,log17Ac,nb17Ac,yr,top):
        
    d=pd.DataFrame(index=N)
    for key, value in dic.items():
        d[key]=value
    # d['lin{0}'.format(yr)]=lin17
    # d['lin{0}Ac'.format(yr)]=lin17Ac
    # d['lasso{0}Ac'.format(yr)]=lasso17Ac
    # d['log{0}'.format(yr)]=log17    
    # d['log{0}Ac'.format(yr)]=log17Ac
    # d['naiveBayes{0}Ac'.format(yr)]=nb17Ac
    ax=d.plot.barh(title='Costes 20{0} - PPV TOP{1}'.format(yr,top),figsize=(5,10),width=0.9)
    ax.set_xlim([0, max(d[key])+10])
    for p in ax.patches:
        ax.annotate(str(round(p.get_width(),2)), ( p.get_width() * 1.005,p.get_y() ))


"""TOP 1 """

N=[22405,44810,50000,67215,89620,1e5,112025]

lin17= [23.909841553224727, 17.49609462173622, 16.582, 14.237893327382281, 12.095514394108458, 11.373, 10.651193929926356]
lin18= [23.08859629546976, 17.00066949341665, 16.122, 13.830246224801012, 11.839991073421112, 11.18, 10.478910957375586]
lin19= [23.490292345458602, 17.194822584244587, 16.35, 14.080190433682958, 12.01629100647177, 11.272, 10.554786877929034]

lin17Ac= [25.132782860968533, 18.011604552555234, 17.012, 14.478910957375586, 12.30194153090828, 11.533, 10.755634902923454]
lin18Ac= [24.088373130997546, 17.531800937290782, 16.54, 14.063825039053782, 11.972773934389645, 11.24, 10.506583351930372]
lin19Ac= [24.597188127650078, 17.781745146172728, 16.746, 14.26616082719631, 12.12452577549654, 11.356, 10.578888640928364]

lasso17Ac= [25.061370229859406, 18.018299486721713, 16.97, 14.438741352376702, 12.285204195492078, 11.538, 10.752064271367999]
lasso18Ac= [24.066056683775944, 17.48493639812542, 16.454, 14.011753328870045, 11.986163802722606, 11.23, 10.50390537826378]
lasso19Ac= [24.51684891765231, 17.759428698951126, 16.728, 14.255746485159563, 12.10778844008034, 11.343, 10.580673956706093]

log17Ac= [24.823707935374454, 18.013434201423756, 17.043659126817463, 14.572423232563676, 12.286182925876748, 11.51388486115139, 10.73857854426651]
log18Ac= [23.76595554762117, 17.491240989935505, 16.50166996660067, 14.065103546774578, 11.948092522957788, 11.15588844111559, 10.406512773820364]
log19Ac= [24.506828528072838, 17.761263975363192, 16.733665326693465, 14.242144727445845, 12.132201158210687, 11.372886271137288, 10.609144305786156]

#con regularizaci√≥n y scoring customizado
log17Acbal= [23.78380790859591, 17.509093749302625, 16.629667406651865, 14.237681504403714, 12.132201158210687, 11.378886211137889, 10.669844500383839]
log18Acbal= [22.632330625725253, 16.993595322577047, 16.14967700645987, 13.792846941204475, 11.852132870644157, 11.11288887111129, 10.41454662310535]
log19Acbal= [23.172364545211103, 17.27923947245096, 16.38967220655587, 14.002618424184718, 12.009462068042088, 11.270887291127089, 10.518986663810187]

#sin regularizacion y con scoring default
log17Acbal= [23.70793537445327, 17.482314610251947, 16.623667526649466, 14.225779576291359, 12.12662210865757, 11.369886301136988, 10.66805920054273]
log18Acbal= [22.560921181826295, 16.957889803842807, 16.12767744645107, 13.777969531064032, 11.843206391359168, 11.106888931110689, 10.41454662310535]
log19Acbal= [23.10095510131215, 17.272544687688292, 16.36767264654707, 13.998155201142586, 12.00388301848897, 11.26788732112679, 10.514523414207416]

nb17Ac= [19.89199321610283, 14.927138425832943, 14.273714525709487, 12.333373006427042, 10.691690563595586, 10.09189908100919, 9.496009854855123]
nb18Ac= [18.959207355172722, 14.52098815023097, 13.881722365552688, 12.113187336348489, 10.462949531917742, 9.93990060099399, 9.334440219234821]
nb19Ac= [19.267160581986968, 14.732989667715517, 14.057718845623087, 12.291716258033802, 10.653753026634382, 10.08089919100809, 9.481727456126256]


nb17Acbal= [20.012496652682316, 14.951685969962732, 14.297714045719086, 12.349738157581529, 10.693922183416833, 10.072899271007289, 9.493331905093461]
nb18Acbal= [19.124341694189056, 14.53437771975631, 13.893722125557488, 12.126577005474887, 10.46518115173899, 9.92090079099209, 9.320157820505955]
nb19Acbal= [19.45014728197804, 14.831179844234674, 14.151716965660686, 12.33634848845513, 10.666026935651242, 10.086899131008689, 9.501365754378448]

RFoobGini17= [47.19715492331629, 32.03166815343443, 29.761786105850693, 24.332679388859162, 19.725287600004464, 18.12281877181228, 16.535369918192025]
RFtunedGini17= [29.04132821565652, 21.064024458280333, 19.93960120797584, 16.991490121399668, 14.324767632586113, 13.374866251337487, 12.410511845464447]
RFtunedGini18= [20.217798803891814, 15.5586797884448, 14.781704365912681, 13.041537729112116, 11.215005411678067, 10.557894421055789, 9.933408315926659]
RFtunedGini19= [20.507899669731323, 15.750596951641338, 14.94170116597668, 13.066829326350868, 11.390187567645976, 10.72889271107289, 10.084266152500312]

histOOB17cat= [25.412835847540837, 18.205351364620295, 17.213655726885463, 14.75541537729112, 12.526082056660828, 11.717882821171788, 10.910859978933463]
histOOB18= [23.627599750066945, 17.272544687688292, 16.31567368652627, 13.943108783622947, 11.895649457158479, 11.189888101118989, 10.483280666988021]
histOOB19= [24.270284745157547, 17.466693445805717, 16.565668686626267, 14.237681504403714, 12.076410662679505, 11.339886601133989, 10.582364808169531]

histOOB18cat= [23.59189502811747, 17.169891321327352, 16.19967600647987, 13.950547488693168, 11.853248680554781, 11.09888901110989, 10.410976023423133]
histOOB19cat= [24.350620369543872, 17.471156635647496, 16.581668366632666, 14.157343489645323, 12.05297865455641, 11.296887031129689, 10.57343830896399]

hist17recall= [25.32803713291083, 18.187498605253175, 17.217655646887064, 14.670614139490597, 12.505997478269602, 11.704882951170488, 10.919786478139004]
hist18recall= [23.618673569579578, 17.127491017830444, 16.153676926461472, 13.87467269697691, 11.8777964985885, 11.14088859111409, 10.381518576044847]
hist19recall= [24.435419084173883, 17.486777800093726, 16.567668646627066, 14.140978338490836, 12.011693687863335, 11.263887361126388, 10.527020513095174]

hist17default= [25.354815674372936, 18.062529289683336, 17.109657806843863, 14.590276124732206, 12.411153635866594, 11.619883801161988, 10.825165586560264]
hist18default= [24.09176113541016, 17.27700787753007, 16.28567428651427, 13.883599143061176, 11.803037234576717, 11.066889331106688, 10.351168478746006]
hist19default= [24.26135856467018, 17.484546205172837, 16.629667406651865, 14.166269935729588, 12.059673514020151, 11.263887361126388, 10.514523414207416]

# d={'lin17':lin17,'lin17Ac':lin17Ac,'lasso17Ac':lasso17Ac,'nb17Ac':nb17Ac,
#    'nb17Acbal':nb17Acbal,'log17Ac':log17Ac,'log17balAc':log17Acbal}
# plot(N,d,17,1)

# d={'lin18':lin18,'lin18Ac':lin18Ac,'lasso18Ac':lasso18Ac,'nb18Ac':nb18Ac,
#    'nb18Acbal':nb18Acbal,'log18Ac':log18Ac,'log18balAc':log18Acbal}
# plot(N,d,18,1)
# d={'lin19':lin19,'lin19Ac':lin19Ac,'lasso19Ac':lasso19Ac,'nb19Ac':nb19Ac,
#    'nb19Acbal':nb19Acbal,'log19Ac':log19Ac,'log19balAc':log19Acbal}
# plot(N,d,19,1)

d={'lin17':lin17,'lin17Ac':lin17Ac,'lasso17Ac':lasso17Ac,
   'log17Ac':log17Ac,'log17balAc':log17Acbal,'RFoobGini17':RFoobGini17,
   'hist17default':hist17default}
plot(N,d,17,1)

d={'lin18':lin18,'lin18Ac':lin18Ac,'lasso18Ac':lasso18Ac,
   'log18Ac':log18Acbal,
   'histOOB18':histOOB18,
   'hist18default':hist18default}
plot(N,d,18,1)
d={'lin19':lin19,'lin19Ac':lin19Ac,'lasso19Ac':lasso19Ac,
   'log19Ac':log19Ac,'log19balAc':log19Acbal,
   'hist19default':hist19default}
plot(N,d,19,1)


